(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{514:function(t,e,a){t.exports=a.p+"assets/img/dataset.41cda295.png"},626:function(t,e,a){"use strict";a.r(e);var s=a(4),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),s("p",[t._v("集群是redis在2.8之后提供的新特性，为了解决单个redis服务性能瓶颈而应运而生。")]),t._v(" "),s("p",[t._v("集群就是使用网络将若干台计算机并联起来，并提供统一的管理方式，使其对外呈现单机的服务效果")]),t._v(" "),s("p",[t._v("这样可以分散单台服务器的访问压力，实现负载均衡，分散单台服务器的存储压力，实现高拓展性，也可以降低单台服务器宕机带来的业务灾难")]),t._v(" "),s("h2",{attrs:{id:"架构设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#架构设计"}},[t._v("#")]),t._v(" 架构设计")]),t._v(" "),s("h3",{attrs:{id:"数据存储设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据存储设计"}},[t._v("#")]),t._v(" 数据存储设计")]),t._v(" "),s("ul",[s("li",[t._v("通过算法设计，使用CRC16计算key得出值后取16384的模后，得出key应该存储的位置")]),t._v(" "),s("li",[t._v("将所有的存储空间计划切割成16384份，每台主机保存一部分，每份代表的是一个存储空间，不是一个key的保存空间")]),t._v(" "),s("li",[t._v("按照key的计算结果放到对用的存储空间")])]),t._v(" "),s("center",[s("p",[s("img",{attrs:{src:a(514),alt:"storage"}})])]),t._v(" "),s("h3",{attrs:{id:"集群内部通讯设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#集群内部通讯设计"}},[t._v("#")]),t._v(" 集群内部通讯设计")]),t._v(" "),s("p",[t._v("集群是没有主从的概念的，每个节点都会互联。每个节点都会存储每个节点的存储槽。")]),t._v(" "),s("p",[t._v("如果当前读写指令连接一个节点，如果刚好这个key的存储为当前节点，则刚好命中，直接返回。如果不在当前节点，会使用当前节点存储的槽信息连接对应的节点。")]),t._v(" "),s("h2",{attrs:{id:"集群搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#集群搭建"}},[t._v("#")]),t._v(" 集群搭建")]),t._v(" "),s("p",[t._v("配置：\n"),s("code",[t._v("cluster-enabled yes|no")]),t._v(" 是否开启集群\n"),s("code",[t._v("cluster-config-file <path>")]),t._v(" 集群配置文件\n"),s("code",[t._v("cluster-node-time millis")]),t._v(" 集群超时时间，超时就下线")]),t._v(" "),s("p",[s("code",[t._v("./redis-trib.rb create --replicas 1 <ip>:<port>")])])],1)}),[],!1,null,null,null);e.default=r.exports}}]);